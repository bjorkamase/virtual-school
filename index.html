<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>GHOST SCHOOL JUMPSCARE</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
    <style>
      html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; position: fixed; font-family: 'Courier New', monospace; }
      #ui-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 10000; display: flex; justify-content: center; align-items: center; color: #f00; text-align: center; }
      .menu-box { border: 2px solid #f00; padding: 30px; border-radius: 10px; background: #111; }
      .role-btn { width: 100%; padding: 15px; margin: 10px 0; border: 1px solid #f00; background: #222; color: #f00; font-weight: bold; cursor: pointer; }
      
      /* JUMPSCARE OVERLAY */
      #jumpscare-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        z-index: 9999; display: none; background-size: cover; background-position: center;
      }
      #chat-area { position: absolute; bottom: 15px; left: 10px; right: 10px; z-index: 1000; display: none; }
      #messages { height: 60px; background: rgba(0,0,0,0.8); color: #f00; padding: 8px; overflow-y: auto; font-size: 11px; border: 1px solid #400; }
    </style>
  </head>
  <body>

    <div id="jumpscare-overlay"></div>

    <div id="ui-overlay">
      <div class="menu-box">
        <h1 style="text-shadow: 0 0 10px #f00;">TEROR SEKOLAH</h1>
        <p>Gunakan Headset & Miringkan HP</p>
        <button class="role-btn" onclick="mulai('Tumbal')">MASUK SEKOLAH</button>
      </div>
    </div>

    <div id="chat-area">
      <div id="messages"></div>
      <div style="display:flex;">
        <input type="text" id="chat-input" placeholder="..." style="flex:1; background:#000; color:#f00; border:1px solid #f00; padding:10px;">
        <button onclick="kirim()" style="background:#400; color:#fff; border:none; padding:10px;">Kirim</button>
      </div>
    </div>

    <audio id="scary-bgm" loop src="https://www.soundjay.com/ambient/creepy-background-01.mp3"></audio>
    <audio id="scream-snd" src="https://www.soundjay.com/human/scream-01.mp3"></audio>

    <a-scene fog="type: exponential; color: #050505; density: 0.1">
      <a-assets>
        <img id="ghost-face" src="https://i.imgur.com/vHqJ9S0.png">
      </a-assets>

      <a-entity environment="preset: moonlight; dressing: trees; dressingAmount: 20; groundColor: #050505;"></a-entity>

      <a-entity id="rig" position="0 1.6 15">
        <a-camera look-controls="touchEnabled: true" wasd-controls="acceleration: 80">
          <a-light type="spot" color="#fff" intensity="1.5" distance="15" angle="30" position="0 0 0"></a-light>
          <a-cursor color="#f00"></a-cursor>
        </a-camera>
      </a-entity>

      <a-entity id="school-building"></a-entity>

      <a-image src="#ghost-face" position="-5 1.6 5" scale="2 3 1" look-at="#rig"></a-image>
      <a-image src="#ghost-face" position="5 5 0" scale="2 3 1" look-at="#rig"></a-image>

    </a-scene>

    <script>
      const building = document.getElementById('school-building');
      
      // Generate 24 Kelas (4 Lantai)
      for (let l = 0; l < 4; l++) {
        for (let k = 0; k < 6; k++) {
          let x = (k * 6) - 15; let y = l * 4;
          let room = document.createElement('a-entity');
          room.setAttribute('position', `${x} ${y} 0`);
          room.innerHTML = `
            <a-box width="5.8" height="3.8" depth="6" color="#111"></a-box>
            <a-box position="0 0 3.01" width="1.2" height="2.2" color="#000" class="clickable"></a-box>
            <a-text value="KELAS ${l+1}0${k+1}" position="0 2.2 3.1" align="center" color="#f00" width="4"></a-text>
          `;
          building.appendChild(room);
        }
      }

      function mulai(role) {
        document.getElementById('ui-overlay').style.display = 'none';
        document.getElementById('chat-area').style.display = 'block';
        document.getElementById('scary-bgm').play();
        
        // Mulai Random Jumpscare
        scheduleJumpscare();
      }

      function triggerJumpscare() {
        const overlay = document.getElementById('jumpscare-overlay');
        const scream = document.getElementById('scream-snd');
        
        // Daftar gambar jumpscare (bisa ditambah)
        const ghosts = [
          'https://i.imgur.com/vHqJ9S0.png',
          'https://i.imgur.com/u6N8WJt.png'
        ];
        
        overlay.style.backgroundImage = `url('${ghosts[Math.floor(Math.random()*ghosts.length)]}')`;
        overlay.style.display = 'block';
        scream.play();

        setTimeout(() => {
          overlay.style.display = 'none';
          scheduleJumpscare(); // Jadwalkan jumpscare berikutnya
        }, 500); // Tampil selama 0.5 detik
      }

      function scheduleJumpscare() {
        let time = Math.random() * 15000 + 5000; // Antara 5 - 20 detik
        setTimeout(triggerJumpscare, time);
      }

      function kirim() {
        const inp = document.getElementById('chat-input');
        if(inp.value.trim()!="") {
          const m = document.getElementById('messages');
          m.innerHTML += `<div><b>[TUMBAL]:</b> ${inp.value}</div>`;
          m.scrollTop = m.scrollHeight;
          inp.value = "";
        }
      }
    </script>
  </body>
</html>
